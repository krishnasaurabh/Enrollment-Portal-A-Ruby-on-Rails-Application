<p id="notice"><%= notice %></p>

<h1>Courses</h1>

<table class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Instructor name</th>
      <th>Weekday one</th>
      <th>Weekday two</th>
      <th>Start time</th>
      <th>End time</th>
      <th>Course code</th>
      <th>Capacity</th>
      <th>Status</th>
      <th>Room</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @courses.each do |course| %>
      <tr>
        <td><%= course.name %></td>
        <td><%= course.instructor.user.name %></td>
        <td><%= course.weekday_one %></td>
        <td><%= course.weekday_two %></td>
        <td><%= course.start_time %></td>
        <td><%= course.end_time %></td>
        <td><%= course.course_code %></td>
        <td><%= course.capacity %></td>
        <td>
        <% if course.status == "open"%>
        <span class="btn btn-success btn-sm">Open</span>
        <% elsif course.status == "closed"%>
        <span class="btn btn-danger btn-sm">Closed</span>
        <% elsif course.status == "waitlist"%>
        <span class="btn btn-warning btn-sm">Closed</span>
        <% end %>        
        </td>
        <td><%= course.room %></td>
        <td><%= link_to 'Show', course %></td>
        <% if is_student? %>
          <td><%= link_to 'Enroll', enroll_course_path(course.id), data: { confirm: 'Are you sure?' } %></td>
          <%if course.status == "waitlist"%>
            <td><%= link_to 'Waitlist', waitlist_course_path(course.id), data: { confirm: 'Are you sure?' } %></td>
          <%end%>
        <% elsif is_instructor? && course.instructor_id == @instructor_id %>
          <td><%= link_to 'Edit', edit_course_path(course) %></td>
          <td><%= link_to 'Destroy', course, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% elsif is_admin? %>
          <td><%= link_to 'Edit', edit_course_path(course) %></td>
          <td><%= link_to 'Destroy', course, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Course', new_course_path %>
